/*! coolSlider v1.6 - http://github.com/romanmz/coolSlider */
(function(e,t,n){function s(){var e=document.createElement("p"),r,i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var s in i){if(e.style[s]!==n){e.style[s]="translate3d(1px,1px,1px)";r=t.getComputedStyle(e).getPropertyValue(i[s])}}document.body.removeChild(e);return r!==n&&r.length>0&&r!=="none"}function o(){var e=document.createElement("p").style;var t="transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e;return t}var r="coolSlider";var i={type:"fade",swipe:"scroll",slides:"> *",timer:8e3,speed:500,showFirst:1,loop:false,autoplay:false,keyboard:true,fixHeight:false,selectedSlideClass:"selected",previousSlideClass:"previous",controlsDisabledClass:"disabled",controlsPausedClass:"paused",controlsSelectedClass:"selected",prev:"",next:"",play:"",pause:"",links:"",linksNumber:"",current:"",total:"",visualTimer:"",init:function(){},slidestart:function(){},slideend:function(){},touchstart:function(){},touchmove:function(){},touchend:function(){},swipesuccess:function(){},swipefail:function(){}};var u=function(t,n){this.element=t;this.options=e.extend({},e.fn[r].defaults,n,t.data(r.toLowerCase()));this._init(t,this.options)};e.fn[r]=function(t){return this.each(function(){if(!e(this).data(r+"API")){e(this).data(r+"API",new u(e(this),t))}})};e.fn[r].defaults=i;u.prototype={_init:function(n,u){var a=this;var f;var l;var c;f=a.slides=n.find(u.slides);if(f.length<2){return}l=a.data={total:f.length,selected:-1,previous:-1,loopDir:0,moving:false,timerChange:false,timerTransition:false,forced:false,speed:u.speed,playing:u.autoplay,touch:u.swipe&&("ontouchstart"in t||navigator.msMaxTouchPoints>0),selectedSlide:e(),previousSlide:e(),otherSlides:e(),visualTimer:e(u.visualTimer),csstransforms3d:typeof Modernizr!="undefined"&&Modernizr.csstransforms3d||s(),csstransitions:typeof Modernizr!="undefined"&&Modernizr.csstransitions||o()};if(u.showFirst=="random"){u.showFirst=Math.ceil(Math.random()*l.total)}if(u.keyboard){e(document).on("keydown."+r,function(e){var t=e.which;if(t==37)a.showPrevious();else if(t==39)a.showNext()})}a.addTouchEvents();c=l.touch?u.swipe:u.type;if(typeof c==="string"&&typeof e.fn[r].transitions[c]==="function"){c=e.fn[r].transitions[c]}if(typeof c!=="function"){c=e.fn[r].transitions[i.type]}c.call(a,n,f,u,l);u.init.call(a,n,f,u,l);a.initControls();a.showSlide(u.showFirst-1,0);if(u.fixHeight){function h(){var t=0;f.height("").each(function(){t=Math.max(t,e(this).height())}).height(t)}h();setTimeout(h,500);e(t).on("load."+r,h);e(t).on("resize."+r,h);if(typeof e.fn.imagesLoaded=="function"){f.imagesLoaded().progress(h)}}},addTouchEvents:function(){var e=this,t=e.element,i=e.slides,s=e.options,o=e.data;var u=o.touchData={};if(!o.touch){return}t.on("touchstart."+r,function(r){var a=r.originalEvent.touches[0];u.startX=a.pageX;u.startY=a.pageY;u.startTime=+(new Date);u.deltaX=0;u.deltaY=0;u.resistance=1;u.isVertical=n;u.width=t.innerWidth();u.swipeX=0;u.direction=0;s.touchstart.call(e,t,i,s,o)}).on("touchmove."+r,function(n){n=n.originalEvent;if(n.touches.length>1||n.scale&&n.scale!==1){return}u.deltaX=n.touches[0].pageX-u.startX;u.deltaY=n.touches[0].pageY-u.startY;if(typeof u.isVertical=="undefined"){u.isVertical=Math.abs(u.deltaX)<Math.abs(u.deltaY)}if(u.isVertical){return}if(o.selected<=0&&u.deltaX>0||o.selected>=o.total-1&&u.deltaX<0){u.resistance=Math.abs(u.deltaX)/u.width+2}u.swipeX=u.deltaX/u.width;u.direction=u.deltaX<0?1:-1;n.preventDefault();s.touchmove.call(e,t,i,s,o)}).on("touchend."+r,function(n){if(u.isVertical){return}var a=+(new Date)-u.startTime<250;var f=Math.abs(u.deltaX)>20;var l=Math.abs(u.swipeX)>.5;if(l||a&&f){t.trigger("swipesuccess."+r);s.swipesuccess.call(e,t,i,s,o)}else{t.trigger("swipefail."+r);s.swipefail.call(e,t,i,s,o)}s.touchend.call(e,t,i,s,o)})},initControls:function(){if(this.controls){return}var t=this,n=t.options,i=t.data;var s=t.controls=e();var o=e(n.links);s.prev=e(n.prev);s.next=e(n.next);s.play=e(n.play);s.pause=e(n.pause);s.links=e();s.current=e(n.current);s.total=e(n.total);for(var u=0;u<i.total;u++){var a=o.eq(u);if(!a.length){a=o.last().clone().insertAfter(o.last());o=o.add(a)}var f=t.slides.eq(u).data("slide-title");if(!f)f=u+1;a.find(n.linksNumber).text(f);s.links=s.links.add(a)}if(!i.playing){s.play.addClass(n.controlsPausedClass);s.pause.addClass(n.controlsPausedClass)}t.element.on("slidestart."+r,function(){t.updateControls()});s.prev.on("click."+r,function(){t.showPrevious();return false});s.next.on("click."+r,function(){t.showNext();return false});s.play.on("click."+r,function(){t.playSlides();return false});s.pause.on("click."+r,function(){t.stopSlides();return false});s.links.on("click."+r,function(){i.loopDir=0;t.showSlide(t.controls.links.index(e(this)));return false})},updateControls:function(){var e=this,t=e.data,n=e.options,r=e.controls;var i=n.loop||t.selected>0?"removeClass":"addClass";r.prev[i](n.controlsDisabledClass);var s=n.loop||t.selected<t.total-1?"removeClass":"addClass";r.next[s](n.controlsDisabledClass);r.links.removeClass(n.controlsSelectedClass).eq(t.selected).addClass(n.controlsSelectedClass);r.current.text(t.selected+1);r.total.text(t.total)},limitRange:function(e){var t=this.data.total-1;var n=this.options.loop;return e>t?n?0:t:e<0?n?t:0:e},showSlide:function(t,n){var i=this,s=i.element,o=i.slides,u=i.data,a=i.options;if(typeof n==="undefined")n=a.speed;t=i.limitRange(t);if(!u.forced&&(u.moving||t==u.selected)){return}u.forced=false;u.moving=true;u.previous=u.selected;u.selected=t;u.speed=n;if(u.loopDir==0){u.loopDir=u.selected-u.previous>0?1:-1}u.selectedSlide=o.eq(u.selected);u.previousSlide=u.previous>=0?o.eq(u.previous).not(u.selectedSlide):e();u.otherSlides=o.not(u.selectedSlide).not(u.previousSlide);clearTimeout(u.timerChange);clearTimeout(u.timerTransition);o.removeClass(a.selectedSlideClass+" "+a.previousSlideClass);u.selectedSlide.addClass(a.selectedSlideClass);u.previousSlide.addClass(a.previousSlideClass);u.visualTimer.stop(true,false).animate({width:0,marginLeft:"100%"},{duration:u.speed});s.trigger("slidestart."+r);a.slidestart.call(i,s,o,a,u);u.timerTransition=setTimeout(function(){u.moving=false;if(u.playing){i.playSlides()}u.previousSlide.removeClass(a.previousSlideClass);s.trigger("slideend."+r);a.slideend.call(i,s,o,a,u)},u.speed)},showPrevious:function(){this.data.loopDir=-1;this.showSlide(this.data.selected-1)},showNext:function(){this.data.loopDir=1;this.showSlide(this.data.selected+1)},stopSlides:function(){var e=this,t=e.data,n=e.controls,r=e.options;if(n){n.play.addClass(r.controlsPausedClass);n.pause.addClass(r.controlsPausedClass)}t.playing=false;t.forced=true;e.showSlide(t.selected,0)},playSlides:function(){var e=this,t=e.data,n=e.controls,r=e.options;if(n){n.play.removeClass(r.controlsPausedClass);n.pause.removeClass(r.controlsPausedClass)}t.playing=true;t.visualTimer.stop(true,false).css({marginLeft:0}).animate({width:"100%"},{duration:r.timer});clearTimeout(t.timerChange);t.timerChange=setTimeout(function(){next=t.selected+1>t.total-1?0:t.selected+1;e.data.loopDir=1;e.showSlide(next)},r.timer)},createContainer:function(){var t=this.slides.parent();if(t.is(this.element)||t.length>1){t=e("<div>").appendTo(this.element).append(this.slides)}this.container=t;return this.container}};e.fn[r].transitions={fade:function(t,n,i,s){function c(e,t,n,r){if(r==0){e.css({opacity:n});t.not(e).css({opacity:1-n})}else{e.fadeTo(r,n);l=setTimeout(function(){t.not(e).fadeTo(r/2,1-n)},r/2)}}var o=this;var u=o.createContainer();var a=100/s.total;var f=s.touchData;var l;t.css({overflow:"hidden"});u.css({position:"relative",left:0,top:0,width:s.total*100+"%"});n.css({position:"relative","float":"left",width:a+"%",zIndex:0,opacity:0,visibility:"hidden"}).each(function(t,n){e(this).css({left:a*-t+"%"})});t.on("slidestart."+r,function(){s.selectedSlide.css({visibility:"visible",zIndex:1});c(s.selectedSlide,s.previousSlide,1,s.speed)}).on("slideend."+r,function(){s.selectedSlide.css({zIndex:0});n.not(s.selectedSlide).css({zIndex:0,visibility:"hidden",opacity:0})}).on("touchstart."+r,function(){o.stopSlides()}).on("touchmove."+r,function(){if(!f.isVertical){var e=n.eq(s.selected);var t=n.eq(o.limitRange(s.selected+f.direction,0,s.total-1));var r=1-f.swipeX*-f.direction;t.css({visibility:"visible",zIndex:1});c(e,t,r,0)}}).on("swipesuccess."+r,function(){s.forced=true;o.showSlide(s.selected+f.direction,i.speed)}).on("swipefail."+r,function(){s.forced=true;o.showSlide(s.selected,i.speed)})},scroll:function(e,t,n,i){function v(e,t){var n;if(i.csstransforms3d&&i.csstransitions){n=e/a*-100+"%";var r=i.touch?"translate3d("+n+",0,0)":"translateX("+n+")";o.css({transform:r,"transition-duration":t+"ms"})}else{n=e*-100+"%";o.animate({left:n},{duration:t})}}var s=this;var o=s.createContainer();var u=t;var a=u.length;var f=false;var l=n.loop&&!i.touch;var c=i.touchData;if(l){var h=t.clone().prependTo(o);var p=t.clone().appendTo(o);u=u.add(h).add(p);a=u.length}if(e.css("position")=="static"){e.css("position","relative")}o.css({position:"relative",left:0,top:0,width:a*100+"%"});var d=(100/a).toFixed(2);u.css({"float":"left",width:d+"%"});e.on("slidestart."+r,function(){var e=i.selected;f=false;if(l){e+=i.total;if((i.selected-i.previous)*i.loopDir<0){e+=i.total*i.loopDir;f=true}}v(e,i.speed)}).on("slideend."+r,function(){if(l&&f){var e=i.selected+i.total;v(e,0)}}).on("touchstart."+r,function(){s.stopSlides()}).on("touchmove."+r,function(){if(!c.isVertical){var e=i.selected+c.swipeX/-c.resistance;v(e,0)}}).on("swipesuccess."+r,function(){i.forced=true;s.showSlide(i.selected+c.direction,n.speed)}).on("swipefail."+r,function(){v(i.selected,n.speed)})}}})(jQuery,window)